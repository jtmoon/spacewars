// Generated by CoffeeScript 1.4.0
(function() {
  var spacewars;

  spacewars = function() {
    var ctx, drawStage, id, init, ships;
    ctx = null;
    /* Track ships
    */

    ships = {};
    /* Store self via id
    */

    id = null;
    init = function() {
      /*
          Initialize the game by drawing the canvas
          and getting the context.
      */

      var canvas, container, ship;
      canvas = document.getElementById('canvas_spacewars');
      container = document.getElementById('spacewars');
      if (!canvas) {
        canvas = document.createElement('canvas');
        canvas.width = 1280;
        canvas.height = 600;
        canvas.id = 'canvas_spacewars';
        if (container) {
          container.appendChild(canvas);
        } else {
          document.append(canvas);
        }
      }
      ctx = canvas.getContext('2d');
      /* Draw the background
      */

      drawStage();
      ship = new Ship({
        name: 'ship1'
      }, ctx);
      id = ship.id;
      ships[id] = ship;
      /* Listen for keyboard input
      */

      window.addEventListener('keydown', function(e) {
        switch (e.keyCode) {
          case 37:
            /* Left
            */

            ship.isTurning = 'left';
            break;
          case 39:
            /* Right
            */

            ship.isTurning = 'right';
            break;
          case 40:
            /* Up
            */

            ship.accelerate();
            break;
          case 38:
            /* Down
            */

            /* ship.decelerate()
            */

        }
      });
      window.addEventListener('keyup', function(e) {
        switch (e.keyCode) {
          case 37:
            /* Left
            */

            ship.isTurning = false;
            break;
          case 39:
            /* Right
            */

            ship.isTurning = false;
            break;
          case 40:
            /* Up
            */

            ship.accelerate();
            break;
          case 38:
            /* Down
            */

            /* ship.decelerate()
            */

        }
      });
      /* 24 fps
      */

      window.setInterval(function() {
        drawStage();
        return ship.tick();
      }, 1000 / 120);
    };
    drawStage = function() {
      ctx.fillStyle = 'black';
      ctx.fillRect(0, 0, 1280, 600);
    };
    return {
      init: init
    };
  };

  spacewars().init();

}).call(this);
